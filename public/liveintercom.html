<!DOCTYPE html>
<html lang="en" ng-app="myApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>LiveChat</title>
    <link rel="stylesheet" href="/stylesheets/intercom.css">
    <!-- <link href="/bower_components/css-avatars/dist/css/css-avatars.min.css" rel="stylesheet"> -->
    <script src="/bower_components/webcomponentsjs/webcomponents-loader.js"></script>
    <link href="/bower_components/paper-avatar/paper-avatar.html" rel="import">
  </head>
  <body id="intercom-container-body">
    <div id="intercom-container">
      <div data-reactroot="" class="intercom-messenger">
        <div class="intercom-messenger-background"></div>
          <div class="intercom-conversation">
            <div class="intercom-conversation-body-container">
              <div class="intercom-conversation-backgrounds">
                <div class="intercom-conversation-background intercom-conversation-background-1"></div>
              </div>
              <div class="intercom-conversation-body intercom-conversation-body-snapped" style="transform: translateY(0px); bottom: -173px;">
                <div class="intercom-conversation-body-profile">
                  <div class="intercom-conversation-profile intercom-conversation-profile-expanded">
  <div class="intercom-admin-profile">


    <div class="intercom-admin-profile-full">
      <div class="intercom-admin-profile-full-background" style="background-image: url(&quot;https://static.intercomassets.com/avatars/831182/square_128/Kate_Pic-1479735964.jpg?1479735964&quot;);"></div>
      <div>
      <div class="intercom-admin-profile-compact-contents">
        <div class="intercom-admin-profile-compact-avatar">
          <div class="intercom-avatar"><img src="https://static.intercomassets.com/avatars/831182/square_128/Kate_Pic-1479735964.jpg?1479735964"></div>
        </div>
        <div class="intercom-admin-profile-compact-body">
          <div class="intercom-admin-profile-compact-admin-name">智慧有情人</div>
          <div class="intercom-admin-profile-compact-last-active">请点击右下角全屏观看直播</div>
        </div>
      </div>
        <div id="player">
          <iframe frameborder="0" width="100%" height="auto" src="https://ly.yongbuzhixi.com/lss/index.html?vid=classroom" allowfullscreen></iframe>
          
        </div>
        <style>
          #intercom-container .intercom-admin-profile-full{
            padding-left: 30px;
            padding: 10px 30px;
          }
           #intercom-container iframe{
            width: 100%;
           }
          #intercom-container #new_promotion {
            padding: 5px;
            font-size: 14px;
            text-align: center;
            color: #fff;
          }
          #intercom-container #online_users{
            float: none;
            max-width: 100%;
          }
          #intercom-container .intercom-conversation-part-admin .intercom-conversation-part-metadata {
              padding-left: 45px;
          }
        </style>
        <style is="custom-style" include="demo-pages-shared-styles">
          .paper-avatar-mini {
              width: var(--paper-avatar-size, 35px);
              height: var(--paper-avatar-size, 35px);
              font-size: 10px;
          }
          .paper-avatar-history {
            font-size: 10px;
             --paper-avatar-background: var(--google-blue-300);
             @apply(--shadow-none);
             --paper-avatar: {
               border: 1px solid var(--google-yellow-300);
             };
           }
           .paper-avatar-history:hover {
             @apply(--shadow-elevation-8dp);
           }
        </style>
      </div>
    </div>

  </div>
                  </div>


                </div>
                <div class="intercom-conversation-body-parts" style="top: 268px; bottom: 228px;">
                  <div class="intercom-conversation-body-parts-wrapper">
                    <div class="intercom-conversation-parts" id="chat" style="transform: translateY(-18px);">
                      

                      <div class="intercom-conversation-part intercom-conversation-part-admin intercom-conversation-part-grouped">
                        <div id="online_users" class="intercom-comment-container intercom-comment-container-admin">
                          <div class="intercom-comment">
                            <div class="intercom-blocks">
                              <div class="intercom-team-profile-full-avatar intercom-index-0"><div class="intercom-avatar"><img src="https://static.intercomassets.com/avatars/320755/square_128/Profile_Pic-1462433474-1462485564.jpg?1462485564"></div></div>
                              <div class="intercom-team-profile-full-avatar intercom-index-1"><div class="intercom-avatar"><img src="https://static.intercomassets.com/avatars/725453/square_128/18834469_10203276465910029_625882982_n-1496213620.jpg?1496213620"></div></div>
                              <div class="intercom-team-profile-full-avatar intercom-index-2"><div class="intercom-avatar"><img src="https://static.intercomassets.com/avatars/1148856/square_128/face2-1491876848.png?1491876848"></div></div>
 
                            </div>
                            <div id="users" style="display: none;"></div>
                          </div>
                        </div>
                        <span><div class="intercom-conversation-part-metadata"><div class="intercom-conversation-part-metadata-save-state">已有<span id="users_count">21</span>人在等待你的加入.</div></div></span>
                      </div>

                      <div class="intercom-conversation-part intercom-conversation-part-admin intercom-conversation-part-last" id="user_named_join_promo">
                        <div class="intercom-notification-channels-card">
                          <div class="intercom-notification-channels-card-admin-avatar">
                            <div class="intercom-avatar"><img src="http://wx.qlogo.cn/mmopen/50HcP4UOeLWI7mH6BLL0RQNBBJNclX738qVZ1b9CIRGK8eBKzV5RghHRq2vWekUt6EiaPLq9lSlHibWLEmt7nLl2tIZS4iabwtN/0"></div>
                          </div>
                          <div class="intercom-notification-channels intercom-notification-channels-last-part">
                            <div class="intercom-notification-channels-options">
                              <div class="intercom-notification-channels-title-container">
                                <div class="intercom-notification-channels-title">请输入姓名+生日加入直播间</div>
                                <div class="intercom-notification-channels-title-success"></div>
                              </div>
                              <div class="intercom-notification-channels-input-collector">
                                <form action="" id="userForm">
                                  <div class="intercom-notification-channels-input-container">
                                    <div class="intercom-notification-channels-input ">
                                      <label class="intercom-notification-channels-placeholder">
                                      </label>
                                      <input type="text" id="username" name="intercom-channel-collector" value="" placeholder="例：小永0215" autocomplete="off">
                                    </div>
                                    <div class="intercom-notification-channels-input-submit-container">
                                      <div class="intercom-notification-channels-input-submit-button">
                                        <div class="intercom-notification-channels-input-submit-icon"></div>
                                        <div class="intercom-notification-channels-input-valid-icon"></div>
                                      </div>
                                    </div>
                                  </div>
                                  <span id="last_span"></span>
                                </form>
                              </div>
                            </div>
                          </div>
                        </div>
                        <span></span>
                      </div>

                      


<div class="intercom-conversation-parts-date-divider">February 14</div>




                    </div>
                  </div>
                </div>
              </div>
              <span></span>
            </div>

            <div class="intercom-conversation-footer">
              <form action="" id="messageForm">
              <div class="intercom-composer">
                <pre><!-- react-text: 41 --><!-- /react-text --><br></pre>
                <textarea  id="message" placeholder="Write a reply..."></textarea>
                <span></span>
                <span></span>
                <div class="intercom-composer-buttons">
                  <button class="intercom-composer-send-button"></button>
                </div>
              </form>
            </div>
          </div>
        <!-- react-empty: 48 -->
      </div>
    </div>
<style>
  .success_username{
    border: 1px solid #fff;
    border-right: 0;
    padding: 0;
    height: 20px;
    font-weight: 400;
    color: #a8b6c2;
    -webkit-text-fill-color: #a8b6c2;
    overflow: hidden;
    text-overflow: ellipsis;
}

#intercom-container .intercom-admin-profile-compact-contents {
    background-color: rgba(0,0,0,.1);
}
</style>
    <script src="/javascripts/socket.io-1.2.0.js"></script>
    <script src="/javascripts/jquery-1.11.1.js"></script>
    <script>
      function scrollBottom(){
          $('.intercom-conversation-body-parts').animate({
              scrollTop: $(".intercom-conversation-body-parts")[0].scrollHeight
          }, 900);
      }

      function user_named_join_promo(tmp_username){
        var message = '在直播讨论中显示名字：<span style="color:#1F8CEB">'+tmp_username+'</span><p style="font-size: 12px;">微信添加小永微助手，回复［微直播］即可在微信群中讨论，微信群中的讨论将同步显示在本直播间。</p>';
        $('#chat').append('<div class="intercom-conversation-part intercom-conversation-part-admin"><div class="intercom-comment-container intercom-comment-container-admin"><div class="intercom-comment-container-admin-avatar"><div class="intercom-avatar"><img src="http://wx.qlogo.cn/mmopen/50HcP4UOeLWI7mH6BLL0RQNBBJNclX738qVZ1b9CIRGK8eBKzV5RghHRq2vWekUt6EiaPLq9lSlHibWLEmt7nLl2tIZS4iabwtN/0"></div></div><div class="intercom-comment"><div class="intercom-blocks"><div class="intercom-block intercom-block-paragraph">'+message+'</div></div></div></div><span><div class="intercom-conversation-part-metadata">小永微助手</div></span></div>');
          scrollBottom();
      }
      function setCookie(c_name,value,expiredays)
      {
        var exdate=new Date()
        exdate.setDate(exdate.getDate()+expiredays)
        document.cookie=c_name+ "=" +escape(value)+
        ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
      }
      function getCookie(c_name)
      {
        if (document.cookie.length>0)
          {
          c_start=document.cookie.indexOf(c_name + "=")
          if (c_start!=-1)
            { 
            c_start=c_start + c_name.length+1 
            c_end=document.cookie.indexOf(";",c_start)
            if (c_end==-1) c_end=document.cookie.length
            return unescape(document.cookie.substring(c_start,c_end))
            } 
          }
        return ""
      }
    </script>
    <script src="/javascripts/liveintercom.js"></script>
    <script>
	    $( document ).ready(function(){

        $(document).on('focus click', 'input',  function(e){
          if(this.id =='username'){//e.target.id,
            $('.intercom-conversation-body-parts').scrollTop(150);
            // $('#messageForm').hide();
          }
        });

	      $('.intercom-notification-channels-placeholder').on('click',function(){
	        $(this).hide();
	        $('#username').focus();
	      });
	      $ori_username = $('#username').val();
	      $('#username').blur(function(){
	        if($('#username').val()==$ori_username)
	          $(this).prev('.intercom-notification-channels-placeholder').show();
	      });

	      // $('.intercom-composer-emoji-button').click(function(){
	      //    if(!$('#message').is(":disabled")){
	      //     $(this).toggleClass('intercom-composer-emoji-button-active');
	      //     if($('#emojis').css("visibility")=='visible'){
	      //       $('#emojis').css('visibility','hidden');
	      //     }else{
	      //       $('#emojis').css('visibility','visible');
	      //     }
	      //    }
	      // });

	      $('#message').prop('disabled', true).attr('placeholder','请先选择一个通知方式再输入');
	      $('.intercom-conversation-footer').click(function(){
	        if($('#message').is(":disabled")){
	          $('#username').focus();
	        }
	      });
	      //valid email or phonenumer!
	      $('.intercom-notification-channels-input-submit-container').click(function(){
            $tmp_username = $('#username').val();
            var matchs = $tmp_username.match(/\d+$/);
            if($tmp_username.length<6 || matchs.length!=1 || matchs[0].length>4 ){
                $('.intercom-notification-channels-input').addClass('intercom-notification-channels-input-error');
                $('.intercom-notification-channels-input-container').next('span').html('<div class="intercom-notification-channels-error"><p class="intercom-notification-channels-error-text">输入格式不对哦！姓名＋生日，如小永0325</p></div>');
            }else{
              var same_name = 0;
              $('.userli').each(function(){
                if($(this).data('username').toString() === $tmp_username.toString()){
                  same_name = 1;
                }
              });
              if(same_name){
                $('.intercom-notification-channels-input').addClass('intercom-notification-channels-input-error');
                $('.intercom-notification-channels-input-container').next('span').html('<div class="intercom-notification-channels-error"><p class="intercom-notification-channels-error-text">这么巧，有重名啊！换个昵称试试！～</p></div>');
                return;
              }


	            $('#userForm').submit();

	            $('.intercom-notification-channels-input-container').next('span').html('');
	            $('.intercom-notification-channels').addClass('intercom-notification-channels-success');

	            $('.intercom-notification-channels-input').addClass('intercom-notification-channels-input-success').html($('#username').val());

	            $('.intercom-notification-channels-input-submit-container').slideUp();
	            $('.intercom-notification-channels-placeholder').slideUp().html('');
	            $('.intercom-notification-channels-option-container').slideUp();
              user_named_join_promo($tmp_username);
              $(this).parents('.intercom-conversation-part').hide();
	          }
	        });

	      $( '.intercom-conversation-body-parts').scroll(function() {
	        var pox = $('.intercom-conversation-body-parts').scrollTop();
	        if(pox <= 100){

	            $('.intercom-conversation-body-snapped').attr('style', 'transform: translateY(0px);');
              $('.intercom-conversation-body-parts').attr('style', 'top: 268px; bottom: -50px;'); 

               $('#intercom-container .intercom-admin-profile-full').attr('style', 'padding: 10px;30px;');
	        }else{
	            $('.intercom-conversation-body-snapped').attr('style', 'transform: translateY(-50px);');
	            $('.intercom-conversation-body-parts').attr('style', 'top: 200px; bottom: -50px;');
              
              $('#intercom-container .intercom-admin-profile-full').attr('style', 'padding: 0;padding-left: 0;');

	        }
	      });


	      $('.intercom-notification-channels-option').click(function(){
	         $(this).addClass('intercom-notification-channels-option-selected');
	         if($(this).hasClass('intercom-notification-channels-option-sms')){
	           $('.intercom-notification-channels-placeholder').text('137 1234 5678');
	           $('.intercom-flag').show();
	         }else{
	           $('.intercom-flag').hide();
	         }
	         if($(this).hasClass('intercom-notification-channels-option-wechat')){
	           $('.intercom-notification-channels-placeholder').text('your_wechatId');
	         }
	         if($(this).hasClass('intercom-notification-channels-option-qq')){
	           $('.intercom-notification-channels-placeholder').text('474054231');
	         }

	        $('.intercom-notification-channels-option').each(function(){
	          $(this).removeClass('intercom-notification-channels-option-selected');
	        });
	      });

	    });
    </script>


  </body>
</html>
